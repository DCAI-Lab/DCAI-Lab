{% if include.lookup %}
  {% assign member = site.members 
    | where_exp: "member", "member.slug == include.lookup"
    | first
  %}
{% else %}
  {% assign member = include %}
{% endif %}

{% assign img_w = include.width | default: 220 %}

<div class="portrait-wrapper" style="text-align:center;">
  <div class="portrait">
    <img
      src="{{ member.image | relative_url | uri_escape }}"
      class="portrait-image"
      alt="{{ member.name | default: 'member portrait' | regex_strip }}"
      loading="lazy"
      style="width:{{ img_w }}px; height:auto;"
      {% include fallback.html %}
    >
  </div>

  <div class="portrait-links" style="margin-top:10px; font-size:1.2em;">
    {% if member.links.email %}
      <a href="mailto:{{ member.links.email }}" aria-label="email">
        <i class="fas fa-envelope"></i>
      </a>
    {% endif %}

    {% if member.links.scholar %}
      <a href="{{ member.links.scholar }}" target="_blank" aria-label="Google Scholar">
        <i class="ai ai-google-scholar"></i>
      </a>
    {% endif %}

    {% if member.links.github %}
      <a href="{{ member.links.github }}" target="_blank" aria-label="GitHub">
        <i class="fab fa-github"></i>
      </a>
    {% endif %}
  </div>
</div>
